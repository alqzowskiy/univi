<!-- Navigation -->
<nav class="bg-white fixed w-full top-0 z-50 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-20">
            <div class="flex items-center">
                <a href="/" class="flex items-center space-x-3">
                    <svg class="h-12 w-12" viewBox="0 0 4000 2557" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3529.33 1803.34L3537.51 1104.03C3537.59 1096.53 3541.18 1089.51 3547.2 1085.04L3558.73 1076.48C3574.56 1064.73 3597.03 1076.03 3597.03 1095.75L3597.03 1803.59C3597.03 1812.2 3601.71 1820.08 3608.97 1824.71C3708.08 1887.91 3663.29 1952.43 3615.65 1986.2C3605.5 1993.4 3600.87 2006.6 3605.87 2018L3726.49 2292.84C3733.45 2308.7 3721.83 2326.48 3704.51 2326.48L3421.68 2326.48C3404.36 2326.48 3392.75 2308.7 3399.71 2292.84L3520.75 2017.02C3525.57 2006.04 3521.36 1993.25 3511.64 1986.22C3419 1919.24 3469.61 1855.25 3516.98 1824.7C3524.32 1819.96 3529.23 1812.08 3529.33 1803.34Z"
                            fill="url(#paint0_linear_15_13)" />
                        <path
                            d="M1946.61 1889.69L893.722 1413.27C873.63 1404.17 850.536 1418.2 848.764 1440.18C786.053 2218.04 930.785 2265.52 1026.51 2328.44C1124.07 2392.56 1692.47 2552.86 1959.7 2556.87C2226.94 2560.88 2557.79 2456.68 2858.96 2328.44C3087.35 2231.18 3107.63 1720.51 3087.44 1438.88C3085.88 1417.05 3063.08 1403.88 3043.09 1412.79L1972.83 1889.76C1964.48 1893.48 1954.94 1893.46 1946.61 1889.69Z"
                            fill="url(#paint1_linear_15_13)" />
                        <path
                            d="M1963.94 1799.43L79.5355 945.764C48.3548 931.639 48.1683 887.421 79.2287 873.033L1963.94 0C1967.23 1.49378 1970.51 2.98772 1973.78 4.48182C2047.21 37.7283 2510.53 245.231 3916.47 872.467C3928.05 877.634 3935.49 886.971 3938.72 897.423C3944.34 915.61 3937.21 937.171 3916.99 946.008L1963.94 1799.43Z"
                            fill="url(#paint2_linear_15_13)" />
                        <path
                            d="M1472.65 1125.48C1535.73 1165.12 1628.04 1188.39 1729.37 1190.21C1830.71 1192.03 1932.82 1172.24 2013.35 1135.19L2766.59 787.812C2792.85 775.449 2824.69 767.165 2858.17 763.991C2898.14 760.504 2938.45 762.804 2964.95 779.19L2965.85 779.762C2991.2 795.792 2991.22 816.469 2981.68 836.413C2971.7 855.779 2950.33 873.423 2920.83 886.646L2168.74 1233.49C2035.33 1294.88 1866.12 1327.62 1698.25 1324.51C1530.38 1321.4 1377.57 1282.7 1273.34 1216.9C1259.94 1208.35 1251.24 1197.89 1248.06 1186.55C1244.89 1175.2 1247.35 1163.36 1255.21 1152.15C1263.07 1140.94 1276.07 1130.75 1292.94 1122.57C1309.81 1114.38 1330 1108.47 1351.54 1105.41C1374.25 1102.17 1397.65 1102.34 1419.06 1105.89C1440.48 1109.44 1459.05 1116.23 1472.65 1125.48Z"
                            fill="url(#paint3_linear_15_13)" />
                        <path
                            d="M1474.09 1126.37C1411.5 1086.51 1383.41 1033.63 1395.97 979.286C1408.52 924.945 1460.7 873.58 1541.09 836.431L2294.32 489.064C2321.04 476.995 2341.18 461.306 2352.23 443.946C2364.87 423.17 2366.98 401.311 2341.17 384.606L2340.27 384.033C2314.92 368.004 2277.12 364.749 2239.16 366.716C2202.18 369.003 2166.57 377.639 2137.77 391.301L1385.69 738.134C1252.52 799.681 1166.14 884.812 1145.52 974.844C1124.9 1064.88 1171.71 1152.46 1275.69 1218.37C1289.24 1226.85 1307 1233.13 1327.24 1236.6C1347.49 1240.08 1369.53 1240.62 1391.26 1238.18C1412.98 1235.74 1433.65 1230.41 1451.27 1222.69C1468.88 1214.97 1482.85 1205.13 1491.82 1194.12C1501.29 1182.51 1504.65 1170.01 1501.52 1158.03C1498.38 1146.05 1488.88 1135.08 1474.09 1126.37Z"
                            fill="url(#paint4_linear_15_13)" />
                        <defs>
                            <linearGradient id="paint0_linear_15_13" x1="3563.1" y1="1048.05" x2="3563.1" y2="2326.48"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="#537EDD" />
                                <stop offset="1" stop-color="#0050FF" />
                            </linearGradient>
                            <linearGradient id="paint1_linear_15_13" x1="1963.47" y1="1394.66" x2="1963.47" y2="2556.98"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="#537EDD" />
                                <stop offset="1" stop-color="#0050FF" />
                            </linearGradient>
                            <linearGradient id="paint2_linear_15_13" x1="2000" y1="0" x2="2000" y2="1799.43"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="#537EDD" />
                                <stop offset="1" stop-color="#0050FF" />
                            </linearGradient>
                            <linearGradient id="paint3_linear_15_13" x1="2809.24" y1="680.693" x2="2128.04" y2="1757.57"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="white" />
                                <stop offset="1" stop-color="#4976DA" />
                            </linearGradient>
                            <linearGradient id="paint4_linear_15_13" x1="2496.88" y1="483.1" x2="1815.69" y2="1559.95"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="white" />
                                <stop offset="1" stop-color="#4976DA" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <span class="text-3xl font-bold text-blue-600"></span>
                </a>
            </div>

            <!-- Main Navigation -->
            <div class="hidden md:flex items-center space-x-8">
                <!-- Language Selector -->
                <div class="relative">
                    <div id="google_translate_element" class="mx-4"></div>
                </div>

                <!-- Navigation Links -->
                <a href="/unichooser" class="nav-link text-gray-700 hover:text-blue-600 font-medium text-lg">Find
                    Universities</a>
                <a href="/advisor" class="nav-link text-gray-700 hover:text-blue-600 font-medium text-lg">AI Advisor</a>
                <a href="/career-advisor" class="nav-link text-gray-700 hover:text-blue-600 font-medium text-lg">Career
                    Path</a>
                <a href="/gpa-calculator" class="nav-link text-gray-700 hover:text-blue-600 font-medium text-lg">GPA
                    Calculator</a>

                <!-- Auth Buttons -->
                <div id="authButtons" class="flex items-center space-x-4">
                    <a href="/user" id="userProfileBtn"
                        class="hidden flex items-center space-x-2 text-gray-700 hover:text-blue-600">
                        <svg class="h-8 w-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span class="text-sm font-medium" id="navUserName">User</span>
                    </a>
                    <a href="/login" id="loginBtn"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium text-lg">Sign In</a>
                    <a href="/register" id="registerBtn"
                        class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">Sign
                        Up</a>
                    <button id="logoutBtn"
                        class="hidden bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">Sign
                        Out</button>
                </div>
            </div>

            <!-- Mobile menu button -->
            <div class="md:hidden flex items-center">
                <button id="menuBtn" class="text-gray-500 hover:text-gray-600">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobileMenu" class="hidden md:hidden pb-4">
            <div class="flex flex-col space-y-4">
                <div id="google_translate_element_mobile" class="py-2"></div>
                <a href="/unichooser" class="text-gray-700 hover:text-blue-600 font-medium">Find Universities</a>
                <a href="/advisor" class="text-gray-700 hover:text-blue-600 font-medium">AI Advisor</a>
                <a href="/career-advisor" class="text-gray-700 hover:text-blue-600 font-medium">Career Path</a>
                <a href="/gpa-calculator" class="text-gray-700 hover:text-blue-600 font-medium">GPA Calculator</a>
                <a href="/user" id="mobileUserProfileBtn"
                    class="hidden text-gray-700 hover:text-blue-600 font-medium">Profile</a>
                <a href="/login" id="mobileLoginBtn" class="text-gray-700 hover:text-blue-600 font-medium">Sign In</a>
                <a href="/register" id="mobileRegisterBtn" class="text-gray-700 hover:text-blue-600 font-medium">Sign
                    Up</a>
                <button id="mobileLogoutBtn"
                    class="hidden bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">Sign
                    Out</button>
            </div>
        </div>
    </div>
</nav>

<!-- Styles for Google Translate -->
<style>
    #google_translate_element,
    #google_translate_element_mobile {
        margin: 0 10px;
    }

    .goog-te-gadget {
        font-family: 'Inter', sans-serif !important;
        color: transparent !important;
        font-size: 0 !important;
    }

    .goog-te-gadget .goog-te-combo {
        border: 1px solid #e5e7eb !important;
        border-radius: 8px !important;
        padding: 8px 32px 8px 16px !important;
        font-size: 14px !important;
        color: #374151 !important;
        background: white !important;
        cursor: pointer !important;
        appearance: none !important;
        margin-right: 10px !important;
    }

    .goog-te-banner-frame {
        display: none !important;
    }

    body {
        top: 0 !important;
    }

    .VIpgJd-ZVi9od-l4eHX-hSRGPd {
        display: none !important;
    }

    .nav-link {
        position: relative;
        transition: all 0.3s ease;
    }

    .nav-link::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 50%;
        width: 0;
        height: 2px;
        background: #3b82f6;
        transition: all 0.3s ease;
        transform: translateX(-50%);
    }

    .nav-link:hover::after {
        width: 100%;
    }

    .VIpgJd-ZVi9od-aZ2wEe-wOHMyf {
        display: none !important;
    }

    .goog-te-banner-frame.skiptranslate {
        display: none !important;
    }

    .goog-te-banner-frame {
        display: none !important;
    }

    iframe.skiptranslate {
        display: none !important;
    }

    .goog-te-banner-frame {
        display: none !important;
    }

    body {
        top: 0px !important;
    }

    .VIpgJd-ZVi9od-aZ2wEe-wOHMyf,
    .goog-te-banner-frame.skiptranslate {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
    }
</style>

<!-- Google Translate Scripts -->
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'en,ru,kk',
            layout: google.translate.TranslateElement.InlineLayout.DROPDOWN
        }, 'google_translate_element');

        new google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'en,ru,kk',
            layout: google.translate.TranslateElement.InlineLayout.DROPDOWN
        }, 'google_translate_element_mobile');
    }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<!-- Auth and Menu Scripts -->
<script>
    // Auth state observer
    firebase.auth().onAuthStateChanged((user) => {
        const authElements = {
            desktop: {
                profile: document.getElementById('userProfileBtn'),
                login: document.getElementById('loginBtn'),
                register: document.getElementById('registerBtn'),
                logout: document.getElementById('logoutBtn')
            },
            mobile: {
                profile: document.getElementById('mobileUserProfileBtn'),
                login: document.getElementById('mobileLoginBtn'),
                register: document.getElementById('mobileRegisterBtn'),
                logout: document.getElementById('mobileLogoutBtn')
            }
        };

        if (user) {
            ['desktop', 'mobile'].forEach(type => {
                authElements[type].profile.classList.remove('hidden');
                authElements[type].logout.classList.remove('hidden');
                authElements[type].login.classList.add('hidden');
                authElements[type].register.classList.add('hidden');
            });

            const navUserName = document.getElementById('navUserName');
            db.collection('users').doc(user.uid).get().then((doc) => {
                if (doc.exists) {
                    navUserName.textContent = doc.data().name || 'User';
                }
            });
        } else {
            ['desktop', 'mobile'].forEach(type => {
                authElements[type].profile.classList.add('hidden');
                authElements[type].logout.classList.add('hidden');
                authElements[type].login.classList.remove('hidden');
                authElements[type].register.classList.remove('hidden');
            });
        }
    });

    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuIcon = menuBtn.querySelector('svg path');

    if (menuBtn && mobileMenu) {
        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            if (mobileMenu.classList.contains('hidden')) {
                menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
            } else {
                menuIcon.setAttribute('d', 'M6 18L18 6M6 6l12 12');
            }
        });
    }

    // Responsive menu handling
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 768) {
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
                if (menuIcon) {
                    menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
                }
            }
        }
    });

    // Logout handling
    function handleLogout() {
        document.cookie = 'auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        firebase.auth().signOut().then(() => {
            window.location.href = '/advisor';
        }).catch((error) => {
            console.error('Error signing out:', error);
        });
    }

    document.getElementById('logoutBtn')?.addEventListener('click', handleLogout);
    document.getElementById('mobileLogoutBtn')?.addEventListener('click', handleLogout);
</script>